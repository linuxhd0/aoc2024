data â† >â€¢file.Lines "12_input.txt"

dir â† Â«â€¿Â»â€¿(Â«Ë˜)â€¿(Â»Ë˜)
shifts â† dir {ğ•ğ•©}Â¨ <data
fences   â† +Â´(<data) â‰ Â¨ shifts
coords â† â†•â‰¢data
plant_types â† â·â¥Š data
Utr â† <âŒœËœâ†•  # upper triangular matrix
C â† {(ğ•¨ = data) /â—‹â¥Š ğ•©}

Distances â† {
  # Distances between all coordinates for each type of plant
  (Utrâˆ˜âŠ‘âˆ˜â‰¢)âŠ¸Ã— {1=âˆš+Â´Ã—Ëœ(ğ•¨-ğ•©)}âŒœËœ ğ•©
}

ConnectDistances â† {
  # Create lists of related coordinates
  plant_coords S plant_matrix:
   plant_coords {<(â‰ğ•¨)âˆ¾(ğ•©/plant_coords)}Ë˜ plant_matrix
}

# ops = grouping operations to perform on connected coordinates
Group â† { ops â† â·âˆ¨Â´âˆ˜âˆŠâŒœËœ ğ•© â‹„ (<ğ•©) {<â·âˆ¾ğ•©/>ğ•¨}Ë˜ ops }

Perimeter â† {(+Â´Â·+ËfencesÃ—coordsâŠ¸âˆŠ)Â¨ğ•©}Â¨

Area â† {â‰ Â¨ğ•©}Â¨

coords_by_type â† CâŸœcoordsÂ¨ plant_types

groups â† (GroupâŸ{âŒŠ2â‹†â¼â‰ } ConnectDistancesâŸœDistances)Â¨ coords_by_type

â€¢Show +Â´âˆ¾(Area Ã— Perimeter) groups

