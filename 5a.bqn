s â† â€¢Import "bqn-libs/strings.bqn"

data â† â€¢file.Lines "5_input.txt"

Parse â† {s.ToNumsÂ¨ ((âˆ¨Â´ğ•¨âŠ¸=)âŠ0Â¨)âŠ¸/ ğ•©}

rdata â† '|' Parse data

udata â† ',' Parse data

UpdateRules â† {rs ğ•Š u: (âˆ§Â´Â¨+Ë>(rdataâŠ¸=)Â¨ u) / rs}

CheckRule â† {rs ğ•Š u: âˆ§Â´1>-Â´Â¨ uâŠ¸âŠÂ¨rs}

ValidUpdates â† {rs ğ•Š updates: ur â† rsâŠ¸UpdateRulesÂ¨ updates â‹„ ur CheckRuleÂ¨ updates}

A â† {+Â´ {âŒŠâˆ˜Ã·âŸœ2âˆ˜â‰ âŠ¸âŠ‘ğ•©}Â¨ (ğ•¨ ValidUpdates ğ•©)/ğ•©}

â€¢Show rdata A udata

